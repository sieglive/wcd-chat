<div class="page-container chat-room" id="top">
    <md-card>
        <md-grid-list cols="4" rowHeight="2:1">
            <md-grid-tile colspan="1" rowspan="1">
                <div class="vertical-container">
                    <div class="title-container">
                        <div class="title">
                            Chat Room
                        </div>
                        <div class="content">
                            {{ chat_info['chat_name'] }}
                        </div>
                    </div>
                </div>

            </md-grid-tile>
            <md-grid-tile colspan="3" rowspan="3">
                <div class="chat-show" #target>
                    <md-list>
                        <md-list-item *ngFor="let message of message_list">
                            <div class="inline-message-box">
                                <button md-mini-fab class="message-avator" mdTooltip="{{ member_dict[message.user_ip].nickname }}: {{ member_dict[message.user_ip].user_ip }}" mdTooltipPosition="left">{{ message.nickname.slice(0,1) }}</button>
                                <md-card class="message-container" mdTooltip="{{ message.nickname }}: {{ message.msg_time * 1000 | date: 'HH:mm' }}" mdTooltipPosition="left">
                                    <p>{{ message.message }}</p>
                                </md-card>
                            </div>
                        </md-list-item>
                    </md-list>
                </div>
            </md-grid-tile>
            <md-grid-tile colspan="1" rowspan="3">
                <md-list class="member-container">
                    <md-list-item *ngFor="let member of member_list">
                        <md-chip-list>
                            <md-chip color="primary" selected="true">{{ member.nickname }}</md-chip>
                            <md-chip color="accent" selected="true">{{ member.user_ip }}</md-chip>
                            <md-chip *ngIf="chat_info['creator_ip'] === user_info['user_ip'] && user_info['user_ip'] !== member.user_ip" color="accent" selected="true"><a (click)="deleteMember(member.user_ip)"><i class="fa fa-trash-o" aria-hidden="true" style="font-size: 18px"></i></a></md-chip>
                        </md-chip-list>
                    </md-list-item>
                    <md-list-item (keydown)="queryMember($event)" *ngIf="chat_info['creator_ip'] === user_info['user_ip']">
                        <md-input-container class="long-input">
                            <md-placeholder>
                                Enter Ip of user to add
                                <md-icon>mode_edit</md-icon>
                            </md-placeholder>
                            <input mdInput [(ngModel)]="new_member" maxlength="15" />
                        </md-input-container>
                    </md-list-item>
                    <md-list-item *ngIf="chat_info['creator_ip'] === user_info['user_ip']">
                        <button color="primary" md-raised-button (click)="queryMember(null)">Add Member</button>
                    </md-list-item>
                </md-list>
            </md-grid-tile>
            <md-grid-tile colspan="3" (keydown)="sendMessage($event)">
                <div class="chat-input">
                    <md-input-container>
                        <textarea mdInput mdTextareaAutosize mdAutosizeMinRows="5" mdAutosizeMaxRows="5" [(ngModel)]="message"></textarea>
                    </md-input-container>
                </div>
            </md-grid-tile>
        </md-grid-list>


    </md-card>
</div>